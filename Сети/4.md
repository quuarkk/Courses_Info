

### Конспект лекции: Канальный уровень, VLAN и основы сетевого уровня

---

#### **1. Работа коммутатора на канальном уровне**
- **Коммутатор** — устройство, передающее данные между устройствами в локальной сети (LAN) на основе MAC-адресов.  
- **MAC-таблица** (CAM-таблица) — хранит соответствие MAC-адресов устройств и портов коммутатора.  
  - Формируется динамически: при получении пакета коммутатор записывает MAC-адрес отправителя и номер порта.  
  - Просмотр таблицы: команда `show mac-address-table`.  

---

#### **2. Атака переполнения MAC-таблицы**
- **Механизм атаки**:  
  - Злоумышленник отправляет пакеты с поддельными MAC-адресами, заполняя таблицу коммутатора.  
  - Легальные записи вытесняются, коммутатор переходит в режим **концентратора** (широковещательная рассылка пакетов).  
- **Последствия**:  
  - Перехват трафика (включая пароли, логины) через анализ данных злоумышленником.  
  - Уязвимость сетей без шифрования (например, HTTP, Telnet).  

---

#### **3. Методы защиты от атак на MAC-таблицу**
1. **Управляемые коммутаторы**:  
   - Настройка **Port Security**:  
     - Ограничение количества MAC-адресов на порту (команда `switchport port-security maximum 1`).  
     - Блокировка неиспользуемых портов (`shutdown`).  
2. **Статическая привязка MAC-адресов**:  
   - Ручное задание разрешенных MAC-адресов для портов.  
3. **Мониторинг**:  
   - Отслеживание подозрительной активности (например, DHCP Snooping).  

---

#### **4. Виртуальные локальные сети (VLAN)**
- **VLAN** — логическая сегментация сети на изолированные группы устройств.  
  - **Преимущества**:  
    - Уменьшение широковещательного трафика.  
    - Повышение безопасности (изоляция устройств).  
- **Настройка**:  
  - Привязка портов к VLAN (команды `vlan <ID>`, `switchport access vlan <ID>`).  
  - **Транковые порты** (Trunk): передача данных нескольких VLAN через один порт с использованием **тегов** (стандарт 802.1Q).  

---

#### **5. Сетевой уровень: IP и маршрутизация**
- **IP-адресация**:  
  - Уникальный идентификатор устройства в сети (IPv4/IPv6).  
  - **Маршрутизатор** — устройство, передающее пакеты между сетями.  
- **Таблица маршрутизации**:  
  - Содержит пути к сетям (команда `show ip route`).  
  - **Маршрут по умолчанию** (0.0.0.0) — путь для пакетов в неизвестные сети.  
- **Протоколы**:  
  - **ICMP** (проверка связи, `ping`).  
  - **ARP** (определение MAC-адреса по IP).  
  - **TTL (Time-to-Live)** — ограничение времени жизни пакета (измеряется в количестве маршрутизаторов).  

---

#### **6. Взаимодействие уровней**
- **Канальный уровень** (коммутаторы) → **Сетевой уровень** (маршрутизаторы):  
  - Коммутаторы работают с MAC-адресами, маршрутизаторы — с IP-адресами.  
  - VLAN разделяют сети, маршрутизаторы связывают их (через интерфейсы в разных VLAN).  

---

**Ключевые термины**:  
- MAC-адрес, VLAN, транковый порт, 802.1Q, ARP, TTL, Port Security, маршрутизация.
